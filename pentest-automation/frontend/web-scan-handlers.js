// Web Scan Checkbox Toggles
document.addEventListener('DOMContentLoaded', () => {
    // Gobuster toggle
    const gobusterCheckbox = document.getElementById('gobuster-enabled');
    const gobusterOptions = document.getElementById('gobuster-options');

    if (gobusterCheckbox && gobusterOptions) {
        gobusterCheckbox.addEventListener('change', () => {
            if (gobusterCheckbox.checked) {
                gobusterOptions.style.display = 'block';
                document.getElementById('gobuster-threads').disabled = false;
                document.getElementById('gobuster-delay').disabled = false;
            } else {
                gobusterOptions.style.display = 'none';
                document.getElementById('gobuster-threads').disabled = true;
                document.getElementById('gobuster-delay').disabled = true;
            }
        });
    }

    // Nikto toggle
    const niktoCheckbox = document.getElementById('nikto-enabled');
    const niktoOptions = document.getElementById('nikto-options');
    const recursiveSection = document.getElementById('recursive-scan')?.closest('.param-section');

    if (niktoCheckbox && niktoOptions) {
        niktoCheckbox.addEventListener('change', () => {
            if (niktoCheckbox.checked) {
                niktoOptions.style.display = 'block';
                document.getElementById('nikto-scan-type').disabled = false;
                document.getElementById('nikto-delay').disabled = false;

                // Show recursive checkbox when Nikto is enabled
                if (recursiveSection) {
                    recursiveSection.style.display = 'block';
                }
            } else {
                niktoOptions.style.display = 'none';
                document.getElementById('nikto-scan-type').disabled = true;
                document.getElementById('nikto-delay').disabled = true;

                // Hide recursive checkbox when Nikto is disabled
                if (recursiveSection) {
                    recursiveSection.style.display = 'none';
                    // Uncheck recursive if it was checked
                    const recursiveCheckbox = document.getElementById('recursive-scan');
                    if (recursiveCheckbox) {
                        recursiveCheckbox.checked = false;
                        document.getElementById('recursive-options').style.display = 'none';
                    }
                }
            }
        });

        // Hide recursive section on page load if Nikto not checked
        if (!niktoCheckbox.checked && recursiveSection) {
            recursiveSection.style.display = 'none';
        }
    }

    // Recursive scan toggle
    const recursiveCheckbox = document.getElementById('recursive-scan');
    const recursiveOptions = document.getElementById('recursive-options');

    if (recursiveCheckbox && recursiveOptions) {
        recursiveCheckbox.addEventListener('change', () => {
            if (recursiveCheckbox.checked) {
                recursiveOptions.style.display = 'block';
            } else {
                recursiveOptions.style.display = 'none';
            }
        });
    }

    // Wordlist toggle
    const wordlistCheckbox = document.getElementById('wordlist-checkbox');
    const wordlistUploadBtn = document.getElementById('wordlist-upload-btn');

    if (wordlistCheckbox && wordlistUploadBtn) {
        wordlistCheckbox.addEventListener('change', () => {
            wordlistUploadBtn.disabled = !wordlistCheckbox.checked;
        });
    }
});
