// Device type detection and icon assignment
function getDeviceIcon(deviceName, osType) {
    const name = deviceName.toLowerCase();
    const os = osType ? osType.toLowerCase() : '';

    // Check for specific device types
    if (name.includes('linux') || os.includes('linux')) {
        return { src: 'assets/linux.png', fallback: 'üêß', alt: 'Linux' };
    }
    if (name.includes('windows') || os.includes('windows')) {
        return { src: 'assets/windows.png', fallback: 'ü™ü', alt: 'Windows' };
    }
    if (name.includes('router') || name.includes('gateway')) {
        return { src: 'assets/router.png', fallback: 'üñß', alt: 'Router' };
    }
    if (name.includes('apple') || name.includes('mac') || name.includes('ios') || os.includes('darwin')) {
        return { src: 'assets/apple.png', fallback: 'üçé', alt: 'Apple' };
    }
    if (name.includes('switch') || name.includes('cisco')) {
        return { src: 'assets/switch.png', fallback: 'üîÄ', alt: 'Switch' };
    }
    if (name.includes('android')) {
        return { src: 'assets/android.png', fallback: 'ü§ñ', alt: 'Android' };
    }
    if (name.includes('printer')) {
        return { src: 'assets/printer.png', fallback: 'üñ®Ô∏è', alt: 'Printer' };
    }
    if (name.includes('camera') || name.includes('cam')) {
        return { src: 'assets/camera.png', fallback: 'üì∑', alt: 'Camera' };
    }

    // Default unknown device
    return { src: 'assets/unknown.png', fallback: '‚ùì', alt: 'Unknown' };
}

// Create device icon HTML
function createDeviceIconHTML(deviceName, osType) {
    const icon = getDeviceIcon(deviceName, osType);
    return `
        <div class="device-icon">
            <img src="${icon.src}" alt="${icon.alt}" class="device-icon-img" 
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
            <span class="device-icon-fallback" style="display:none;">${icon.fallback}</span>
        </div>
    `;
}

// Example usage when adding devices dynamically:
// const deviceHTML = createDeviceIconHTML('192.168.1.100 (MacBook-Pro)', 'Darwin');

// Export for use in other scripts
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { getDeviceIcon, createDeviceIconHTML };
}
